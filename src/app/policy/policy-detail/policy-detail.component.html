<div style="height: 70px;"></div>

<div class="policy-container">
  <!-- Insurance Options Section -->
  <div class="policy-card">
    <mat-card>
      <mat-card-header>
        <mat-card-title>Insurance Options</mat-card-title>
      </mat-card-header>

      <!-- Add-ons Section -->
      <div class="options-section">
        <h4>Add-ons</h4>
        <div class="options-container grid-layout">
          <div *ngFor="let option of addOnOptions" class="checkbox-container" 
               (mouseover)="showTooltip(option)" (mouseleave)="hideTooltip()">
            <mat-checkbox [(ngModel)]="option.selected" (change)="onOptionChange(option, $event.checked)">
              {{ option.optionName }}
            </mat-checkbox>

            <!-- Tooltip on hover -->
            <div class="tooltip comic-tooltip" *ngIf="hoveredOption === option">
              <p>{{ option.description }}</p>
              <p>Price: ₹{{ option.price }}</p>
              <p>Coverage: ₹{{ option.coverageAmount }}</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Accident Covers Section -->
      <div class="options-section">
        <h4>Accident Covers</h4>
        <div class="options-container grid-layout">
          <div *ngFor="let option of accidentCoverOptions" class="checkbox-container" 
               (mouseover)="showTooltip(option)" (mouseleave)="hideTooltip()">
            <mat-checkbox [(ngModel)]="option.selected" (change)="onOptionChange(option, $event.checked)">
              {{ option.optionName }}
            </mat-checkbox>

            <!-- Tooltip on hover -->
            <div class="tooltip comic-tooltip" *ngIf="hoveredOption === option">
              <p>{{ option.description }}</p>
              <p>Price: ₹{{ option.price }}</p>
              <p>Coverage: ₹{{ option.coverageAmount }}</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Accessories Covers Section -->
      <div class="options-section">
        <h4>Accessories Covers</h4>
        <div class="options-container grid-layout">
          <div *ngFor="let option of accessoryCoverOptions" class="checkbox-container" 
               (mouseover)="showTooltip(option)" (mouseleave)="hideTooltip()">
            <mat-checkbox [(ngModel)]="option.selected" (change)="onOptionChange(option, $event.checked)">
              {{ option.optionName }}
            </mat-checkbox>

            <!-- Tooltip on hover -->
            <div class="tooltip comic-tooltip" *ngIf="hoveredOption === option">
              <p>{{ option.description }}</p>
              <p>Price: ₹{{ option.price }}</p>
              <p>Coverage: ₹{{ option.coverageAmount }}</p>
            </div>
          </div>
        </div>
      </div>
    </mat-card>
  </div>

  <!-- Right Side: Plan and Selected Options -->
  <div class="right-side-container">
    <div class="amount-card premium-card">
      <mat-card>
        <h3>Insurance Plan: {{ planName }}</h3> <!-- Changed to use dynamic planName -->
        <p>Amount: ₹{{ baseInsuranceAmount | number }} </p> <!-- Changed to use dynamic baseInsuranceAmount -->
      </mat-card>
    </div>

    <div class="selected-options-card">
      <h3>Selected Options</h3>
      <ul>
        <li *ngFor="let option of selectedOptions">
          {{ option.optionName }} - ₹{{ option.price }}
        </li>
      </ul>
      <div class="total-container">
        <h4>Total Options Amount: ₹{{ totalOptionsAmount | number }}</h4> <!-- Added number pipe for formatting -->
        <h4>Total Payable: ₹{{ totalPayableAmount | number }}</h4> <!-- Added number pipe for formatting -->
      </div>
      <button mat-raised-button color="primary" class="quote-button" (click)="sendQuote()">Send Quote</button>
    </div>
  </div>
</div>
